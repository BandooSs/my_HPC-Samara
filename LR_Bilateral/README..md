
# Лабораторная работая  "Bilateral"
## Задача: 
- Реализовать билатеральный фильтр Язык: C++ или Python.<br />
    - Входные данные: изображение с различными разрешением.<br />
    - Выходные данные: проверка корректности  + время вычисления.
    - Характеристика системы: 
        - 1. видеокарта: GTX 1050;
        - 2. процессор: AMD Ryzen 5 2600 Six-Core Processor 3.40 GHz. 

В данной лабораторной работе производился запуск программы для сложения двух векторов с использованием технологии CUDA. В программе необходимо применить билатеральный фильтрна изображениях с различными расзрешениями. Измерения проводились на размерностях GridDim (2,2) и BlockDim(5,5).Всего получается 100 нитей. Код программы представлен в файле. Использовалась библиотека numba.  В таблицах будут представлены усредненые значения по 12 запускам.<br />
Задачи распараллеливание на CUDA:
1. считывание фото на CPU;
2. переброска матрицы на GPU;
3. расчет на GPU;
4. переброска результата на CPU.   

В таблице представлены результаты -->
| Размерность | Время работы CPU в секундах | Время работы GPU в секундах |
|-------------|:----------------:|-----------------:|
| 100x100 | 0.4003715515136719 | 0.003002643585205078  |
| 302x231 | 3.1208386421203613 | 0.015004167556762695 |
| 504x362 | 11.05775761604309  | 0.0220201015472412 |
| 706x493 | 24.26411533355713  | 0.22620677947998047 |
| 908x624 | 48.534958362579346 | 0.2781611442565918  |
| 1111x755 | 83.82963418960571	 | 0.29320631980895996 |
| 1313x886 | 128.93091416358948	 | 0.3613255023956299 |
| 1515x1017 | 197.68165278434753	 | 0.3813102626800537 |
| 1717x1148 | 284.6968996524811	 | 0.4621412754058838 |
| 1920x1280 | 394.6257939338684	 | 0.49942591667175293    |
| 1100x1100 | 522.029269695282	 | 0.678856611251831 |
| 1200x1200 | 656.7628030776978	 | 0.8237497806549072 |
| 1300x1300 | 836.8655090332031	 | 0.9258420467376709 |
| 1400x1400 | 1102.2687134742737	 | 1.173090934753418 |
| 1500x1500 | 1346.52725815773	 | 1.4012744426727295  |
| 1600x1600 | 1641.6364233493805	 | 1.6915395259857178 |
| 1700x1700 | 1989.127902030944	 | 1.902280569076538 |
| 1800x1800 | 2412.859375		| 2.0018234252929688 |
| 1900x1900 | 2743.371253013611	 | 2.2281675338745117 |
| 2000x2000 | 3337.6133873462677	 | 2.4653019428253174  |



На рисунке предствален график ускорения работы  программы на GPU по сравнению с CPU  при (GridDim, BlockDim) = (512,512): 

![График](https://github.com/BandooSs/my_HPC-Samara/blob/main/LR_VectorSum/512.jpg)

На рисунке предствален график ускорения работы  программы на GPU по сравнению с CPU  при (GridDim, BlockDim) = (1024,512): 

![График](https://github.com/BandooSs/my_HPC-Samara/blob/main/LR_VectorSum/1024.jpg)

На рисунке предствален график ускорения работы  программы на GPU по сравнению с CPU  при (GridDim, BlockDim) = (2048,512): 

![График](https://github.com/BandooSs/my_HPC-Samara/blob/main/LR_VectorSum/2048.jpg)

На рисунке предствален график ускорения работы  программы на GPU по сравнению с CPU  при (GridDim, BlockDim) = (4096,512): 

![График](https://github.com/BandooSs/my_HPC-Samara/blob/main/LR_VectorSum/4096.jpg)

На рисунке предствален график ускорения работы  программы на GPU по сравнению с CPU  при (GridDim, BlockDim) = (8192,512): 

![График](https://github.com/BandooSs/my_HPC-Samara/blob/main/LR_VectorSum/8192.jpg)

Результаты указывают на то, что при увеличении размерности GridDim  ускорение работы на GPU становится более большим, при этом можно сказать, что идельаный случай для расчета на GPU, когда число поток будет равно размерности массивов. Это позволило бы одному потоку отработать одну операцию и закончить свою работу, нежели ему придется считать несколько операций. Например, если размерность массива равна 1_000000 и (GridDim, BlockDim) = (1024,512), то число параллельно работающих потоков равно 1024*512 = 524288, из-за этого первые 500_000 поток сработают два раза, что приведет к замедлению программы. Максимального ускорения удалось достичь на размерности 5000000 при (GridDim, BlockDim) = (8192,512).
